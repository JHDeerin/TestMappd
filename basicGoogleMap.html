<!DOCTYPE html>
<html>
  <head>
    <title>Simple Map</title>
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">
    <style>
      html, body {
        height: 100%;
        margin: 50;
        padding: 0;
      }
      #map {
        height: 600px;
        width: 800px;
      }
    </style>
  </head>
  <body>
    <div id="map"></div>
    <header>
    <!-- Provides extra visual weight and identifies the primary action in a set of buttons -->
        <button type="button" class="btn btn-primary">Primary</button>

              <h1 id = "result"> IP Address </h1>
              <input type = "text" id = "userInput" placeholder="Enter IP Address here"/>
              <input type = "submit" id = 'inputButton' value = "Submit"/>

    </header>
        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBEZMXXFMQV59ImtR6pDFlG98tjqLzXWDo&callback=initMap"
        async defer></script>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

        <script>
          var map;

          Access-Control-Allow-Origin: <origin> | *;

          function initMap() {
            map = new google.maps.Map(document.getElementById('map'), {
              center: {lat: 0.0, lng: 0.0},
              zoom: 3
            });
          }
        </script>

        <script type = "text/javascript">
          $("#inputButton").click(function(){
              var webAddress = "www.twitter.com"; //placeholder
              var ip = $("#userInput").val();
              console.log(ip);

              if($.support.cors) {
                  var servers = $.ajax({type: 'GET',
                  url:  "http://pro.viewdns.info/traceroute/?domain=" + webAddress + "&apikey=37ff79af33301ae2b842a2698b1bc98105129426&output=json",
                  dataType: "json",
                  xhrFields: {withCredentials: true}});
                  servers.done(function(data){
                      console.log(servers);
                  });
              }

              var location = $.getJSON("http://ip-api.com/json/" + ip + "?callback=?", function(json){

                  console.log(json);
                  var markerLatLng = {lat: json.lat, lng: json.lon};
                  map.panTo(markerLatLng);
                  map.setZoom(8);
                  console.log(markerLatLng);

                  var marker = new google.maps.Marker({
                      position: markerLatLng,
                      map: map,
                      title: json.city
                  });
              })
          })
        </script>
  </body>
</html>
